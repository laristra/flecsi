<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" type="image/x-icon" href="flecsi-favicon.ico" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Interface Documentation: FleCSI: Tutorial - 02 Data Clients</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" height="200" style="margin-top:40px; margin-left:30px; margin-right:10px" src="medium-flecsi.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Interface Documentation<br>
		<span id="projectnumber">Version:</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FleCSI: Tutorial - 02 Data Clients </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Data Clients</h1>
<p>Simply put, a data client is a <em>type</em> that accesses data, i.e., it is a client of the FleCSI data model. The core FleCSI library provides data structures, e.g., the mesh topology, that can be specialized to provide an interface for a particular class of applications. Data client instances must be registered with the FleCSI runtime so that initialization and memory management are handled correctly. When you call the registration interface for a data client, you are essentially just declaring a variable that will be accessible through the FleCSI interface during program execution.</p>
<p>For the purpose of this tutorial, we have created a specialization of the FleCSI mesh topology and defined the type <em>mesh_t</em>. This mesh type will be used for many of the examples in the tutorial. The methods exposed by mesh_t are intended only to give the reader a feel for the kinds of interfaces that can be defined using FleCSI. A real specialization may expose several different mesh types and other topology specializations, and would likely have a different interface.</p>
<p>The registration interface for data clients takes the following arguments:</p>
<ol type="1">
<li>The data client type. This must be a valid specialization type. In general, application developers and end-users will not create this type directly. In this example, the data client type is <em>mesh_t</em>.</li>
<li>The namespace of the data client instance that is being registered. Unlike task registration, this namespace does not have to be a valid C++ namespace. The namespace is intended to allow users to avoid naming collisions, i.e., internally, this argument will will be used to distinguish data client instances with the same name from one another. In this example, the namespace is <em>clients</em>.</li>
<li>The name of the client instance. This is the name of the variable that you would like to define. The name is arbitrary, and can be any legal C/C++ variable name. In this example, the name is <em>mesh</em>.</li>
</ol>
<p>Below, the user should note the <em>ro</em> parameter that is used to define the mesh argument to the task. This parameter is specifying a privilege that tells the runtime what parts of the data might be modified during task execution. The concept of privileges will be covered in detail in a later example.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include&lt;flecsi-tutorial/specialization/mesh/mesh.h&gt;</span></div><div class="line"><span class="preprocessor">#include&lt;<a class="code" href="data_8h.html">flecsi/data/data.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include&lt;<a class="code" href="execution_8h.html">flecsi/execution/execution.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceflecsi.html">flecsi</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceflecsi_1_1tutorial.html">flecsi::tutorial</a>;</div><div class="line"></div><div class="line"><span class="comment">// This line is essentially just declaring a variable of type &quot;mesh_t&quot;</span></div><div class="line"><span class="comment">// named &quot;example_mesh&quot; in the namespace &quot;clients&quot;.</span></div><div class="line"></div><div class="line"><a class="code" href="group__data.html#gaaa855ccd1c709526c76247bce774ff64">flecsi_register_data_client</a>(<a class="code" href="structflecsi_1_1tutorial_1_1specialization__mesh__t.html">mesh_t</a>, clients, example_mesh);</div><div class="line"></div><div class="line"><span class="keyword">namespace </span><a class="code" href="namespacehydro.html">hydro</a> {</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> simple_task(<a class="code" href="structflecsi_1_1data__client__handle__base__u.html">mesh&lt;ro&gt;</a> m) {</div><div class="line"></div><div class="line">  <span class="comment">// Our specialization mesh interface provides a &quot;print&quot; method. The</span></div><div class="line">  <span class="comment">// mechanism that allows a mesh handle to be passed to a task inherits</span></div><div class="line">  <span class="comment">// the interface of the data handle type, i.e., all of the methods of</span></div><div class="line">  <span class="comment">// the type are available to the user.</span></div><div class="line"></div><div class="line">  m.print(<span class="stringliteral">&quot;Hello World! I am a mesh!&quot;</span>);</div><div class="line"></div><div class="line">} <span class="comment">// simple_task</span></div><div class="line"></div><div class="line"><span class="comment">// Task registration is as usual...</span></div><div class="line"></div><div class="line"><a class="code" href="group__execution.html#ga4dcd75ac370388c816b99672d589c4bc">flecsi_register_task</a>(simple_task, <a class="code" href="namespacehydro.html">hydro</a>, loc, single);</div><div class="line"></div><div class="line">} <span class="comment">// namespace hydro</span></div><div class="line"></div><div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceflecsi.html">flecsi</a> {</div><div class="line"><span class="keyword">namespace </span>execution {</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="hpx_2runtime__driver_8h.html#a529faee76b6bf740ce1a013919b3654f">driver</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv) {</div><div class="line"></div><div class="line">  <span class="comment">// Here, we ask the runtime for a handle to the data client variable</span></div><div class="line">  <span class="comment">// that we defined above. This handle is an opaque reference to the</span></div><div class="line">  <span class="comment">// data client variable that cannot be accessed outside of a task.</span></div><div class="line">  <span class="comment">// During task execution, this handle will be mapped into the task&#39;s</span></div><div class="line">  <span class="comment">// memory space, at which point it will be accessible by the user.</span></div><div class="line"></div><div class="line">  <span class="keyword">auto</span> m = <a class="code" href="group__data.html#ga9673dfe687ab0a65683d20689bd9cc46">flecsi_get_client_handle</a>(<a class="code" href="structflecsi_1_1tutorial_1_1specialization__mesh__t.html">mesh_t</a>, clients, example_mesh);</div><div class="line"></div><div class="line">  <span class="comment">// Task execution is as usual...</span></div><div class="line"></div><div class="line">  <a class="code" href="group__execution.html#gafca967e833f6d2dffd7d326c5993964f">flecsi_execute_task</a>(simple_task, <a class="code" href="namespacehydro.html">hydro</a>, single, m);</div><div class="line"></div><div class="line">} <span class="comment">// driver</span></div><div class="line"></div><div class="line">} <span class="comment">// namespace execution</span></div><div class="line">} <span class="comment">// namespace flecsi</span></div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
