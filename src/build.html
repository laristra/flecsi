

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building FleCSI &mdash; FleCSI  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  
    <link rel="canonical" href="https://flecsi.orgsrc/build.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CMake Configuration Options" href="build/options.html" />
    <link rel="prev" title="Introduction" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/flecsi.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                Version: 
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building FleCSI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements-prerequisites">Requirements &amp; Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-the-code">Getting The Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spack">Spack</a></li>
<li class="toctree-l2"><a class="reference internal" href="#developers">Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-build">Configuration &amp; Build</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-unit-tests">Building the Unit Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-documentation">Building the Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced">Advanced</a><ul>
<li class="toctree-l3"><a class="reference internal" href="build/options.html">CMake Configuration Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">FleCSI Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-guide.html">FleCSI User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer-guide.html">FleCSI Developer Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="http://flecsi.org/doxygen">FleCSI API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="team.html">FleCSI Team</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FleCSI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Building FleCSI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/src/build.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-flecsi">
<span id="build"></span><h1>Building FleCSI<a class="headerlink" href="#building-flecsi" title="Permalink to this headline">¶</a></h1>
<p>FleCSI can be configured to run with different distributed-memory
runtimes, including Legion, and MPI. FleCSI also has support for various
fine-grained, node-level runtimes, including OpenMP, Kokkos, and
the C++17 extensions for parallelism. Full documentation for FleCSI
requires both Sphinx and Doxygen. These configuration options are listed
to convey to the reader that the FleCSI build system has several paths
that can be taken to tailor FleCSI to a given system and architecture.</p>
<div class="section" id="requirements-prerequisites">
<h2>Requirements &amp; Prerequisites<a class="headerlink" href="#requirements-prerequisites" title="Permalink to this headline">¶</a></h2>
<p>The following list of requirements provides a complete set of build
options, but is not necessary for a particular build:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CI listings indicate specific versions used by FleCSI’s continuous
integration tests. If nothing is indicated, there is no specific
version tested.</p>
</div>
<ul class="simple">
<li><p><strong>C++17 compliant compiler</strong> <br />
At the current time, FleCSI has been tested with GNU, Clang, and Intel
C++ compilers. <br />
CI: gcc 8.3.0, clang 8.0.1, icpc 19.0.2</p></li>
<li><p><strong>MPI</strong> <br />
If Legion support is enabled, the MPI implementation must have support
for <em>MPI_THREAD_MULTIPLE</em>. <br />
CI: mpich 3.2.1, openmpi 3.1.3</p></li>
<li><p><strong>Legion</strong> <br />
We are currently using the most up-to-date version of the master
branch. <br />
CI: control_replication branch</p></li>
<li><p><strong>GASNet</strong> <br />
GASNet is only required if Legion support is enabled.</p></li>
<li><p><strong>CMake</strong> <br />
We currently require CMake version 3.12 or greater.</p></li>
<li><p><strong>Boost</strong> <br />
We require <em>program_options</em> and <em>stacktrace</em>. <br />
CI: 1.70.0</p></li>
<li><p><strong>Doxygen</strong> <br />
Doxygen is only required to build the interface documentation.</p></li>
<li><p><strong>Sphinx</strong> <br />
Sphinx is only required to build the web-based documentation. We are
currently using Sphinx 1.1.0. We also require the Sphinx RTD Theme
(using version 0.4.2). These can be installed on most Linux systems
using pip.</p></li>
<li><p><strong>Python</strong> <br />
We currently require Python 3.0 or greater.</p></li>
</ul>
</div>
<div class="section" id="getting-the-code">
<h2>Getting The Code<a class="headerlink" href="#getting-the-code" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are a user and only want to install FleCSI, you can skip this step.</p>
</div>
<p>Clone the FleCSI git repository, and create an out-of-source build area
(FleCSI prohibits in-source builds):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> git clone https://github.com/laristra/flecsi.git
<span class="gp">$</span> <span class="nb">cd</span> flecsi
<span class="gp">$</span> mkdir build
<span class="gp">$</span> <span class="nb">cd</span> build
</pre></div>
</div>
</div>
<div class="section" id="spack">
<h2>Spack<a class="headerlink" href="#spack" title="Permalink to this headline">¶</a></h2>
<p>The preferred method for installing FleCSI is to use the
<a class="reference external" href="https://github.com/spack/spack">spack</a> package. Spack is easy to
install and configure:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> git clone git@github.com:spack/spack.git
<span class="gp">$</span> <span class="nb">source</span> path/to/spack/repository/share/spack/setup-env.sh
</pre></div>
</div>
<p>Once spack is installed, you can install FleCSI like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> spack install flecsi
</pre></div>
</div>
<p>FleCSI supports several different versions and variants, e.g.:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> spack install flecsi@1.0 +legion +graphviz
</pre></div>
</div>
<p>For a complete list of versions and variants, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> spack info flecsi
</pre></div>
</div>
</div>
<div class="section" id="developers">
<h2>Developers<a class="headerlink" href="#developers" title="Permalink to this headline">¶</a></h2>
<p>If you are a developer, and would like to install only the dependencies of
FleCSI (assuming that you will build FleCSI from source), you can use
spack’s <em>–only</em> option:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> spack install --only dependencies flecsi <span class="nv">backend</span><span class="o">=</span>legion +hdf5 ^mpich
</pre></div>
</div>
<p>If you are developing against a particular branch of FleCSI, you can
capture branch-specific spack dependencies by adding the FleCSI spack
repo (before performing the above step):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> spack repo add path/to/flecsi/spack-repo
</pre></div>
</div>
<p>This will prepend a spack repository path to your spack configuration,
such that the specific branch of FleCSI can override the normal spack
dependencies to provide whatever features are required for a successful
build.</p>
</div>
<div class="section" id="configuration-build">
<h2>Configuration &amp; Build<a class="headerlink" href="#configuration-build" title="Permalink to this headline">¶</a></h2>
<p>Example configuration: <strong>MPI</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cmake -DFLECSI_RUNTIME_MODEL<span class="o">=</span>mpi ..
</pre></div>
</div>
<p>Example configuration: <strong>MPI + OpenMP</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cmake -DFLECSI_RUNTIME_MODEL<span class="o">=</span>mpi -DENABLE_OPENMP ..
</pre></div>
</div>
<p>Example configuration: <strong>Legion</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cmake -DFLECSI_RUNTIME_MODEL<span class="o">=</span>legion ..
</pre></div>
</div>
<p>After configuration is complete, just use <em>make</em> to build:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> make -j <span class="m">16</span>
</pre></div>
</div>
<p>Installation uses the normal <em>make install</em>, and will install FleCSI in
the directory specified by CMAKE_INSTALL_PREFIX:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> make install
</pre></div>
</div>
</div>
<div class="section" id="building-the-unit-tests">
<h2>Building the Unit Tests<a class="headerlink" href="#building-the-unit-tests" title="Permalink to this headline">¶</a></h2>
<p>To build FleCSI unit test suite, enable the option for the FleCSI
logging utility (flog). <strong>By default, this will also enable the unit
tests.</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cmake .. -DENABLE_FLOG
</pre></div>
</div>
<p>After building FleCSI, you can run the unit tests like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> make <span class="nb">test</span>
</pre></div>
</div>
</div>
<div class="section" id="building-the-documentation">
<h2>Building the Documentation<a class="headerlink" href="#building-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>FleCSI uses Doxygen for its API reference, and Sphinx for user and
developer documentation.</p>
<p>Doxygen can be installed with most Linux package managers.  To install
Sphinx, you can install pip3, and use it to install <em>Sphinx</em>,
<em>recommonmark</em>, and <em>sphinx_rtd_theme</em>. Your package manager should also
have pip3, e.g., on Ubuntu, you can install all of these requirements
like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo apt install doxygen
<span class="gp">$</span> sudo apt install python3-pip
<span class="gp">$</span> sudo apt install python3-breathe
<span class="gp">$</span> pip3 install Sphinx
<span class="gp">$</span> pip3 install recommonmark
<span class="gp">$</span> pip3 install sphinx_rtd_theme
</pre></div>
</div>
<p>To enable Doxygen and Sphinx, these options need to be enabled in CMake:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cmake -DENABLE_DOXYGEN<span class="o">=</span>ON -DENABLE_SPHINX<span class="o">=</span>ON ..
</pre></div>
</div>
<p>Once you have properly configured FleCSI, you can build the
documentation like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> make doxygen
<span class="gp">$</span> make sphinx
</pre></div>
</div>
<p>Both of these targets will be built in your build directory under <em>doc</em>,
e.g., the main Doxygen index.html page will be located at
<em>‘doc/doxygen/html/index.html’</em>. Similarly, the Sphinx main index.html
page will be located at <em>‘doc/sphinx/index.html’</em>. You can open these in
your browser with
<em>file:///path/to/your/build/directory/doc/doxygen/html/index.html</em>, and
<em>file:///path/to/your/build/directory/doc/sphinx/index.html</em>.</p>
</div>
<div class="section" id="advanced">
<h2>Advanced<a class="headerlink" href="#advanced" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="build/options.html">CMake Configuration Options</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="build/options.html" class="btn btn-neutral float-right" title="CMake Configuration Options" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 Los Alamos National Laboratory, LLC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
    /* Contents caption */
    .wy-menu-vertical>p.caption {
      color: #ffffff;
    }

    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #e3e2db;
    }
    .wy-side-nav-search>div.version, .wy-nav-top>div.version {
      color: #5f5d5f;
    }

    /* Sidebar */
    .wy-nav-side {
      background: #216897;
      color: #ffffff;
    }
  </style>


</body>
</html>